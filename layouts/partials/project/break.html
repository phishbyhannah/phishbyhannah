{{ $betweenClass := "" }}
{{ if isset . "between" }}
  {{ $betweenClass = printf " project-break-between-%s-%s" (index .between 0) (index .between 1) }}
{{ end }}
{{ $extraClass := "" }}
{{ with .break_class }}{{ $extraClass = printf " %s" . }}{{ end }}
<section class="project-break project-break-{{ .type }}{{ $betweenClass }}{{ $extraClass }}">
  {{ if eq .type "pair" }}
    <div class="project-break-pair">
      {{ range .images }}
      <figure class="project-break-figure">
        {{ partial "media/responsive_image.html" (dict "src" .path "alt" .alt "loading" "lazy" "decoding" "async" "sizes" "(max-width: 900px) 100vw, 50vw" "fallbackWidth" 1400) }}
      </figure>
      {{ end }}
    </div>
  {{ else }}
    {{ with index .images 0 }}
    <figure class="project-break-figure">
      {{ partial "media/responsive_image.html" (dict "src" .path "alt" .alt "loading" "lazy" "decoding" "async" "sizes" "100vw" "fallbackWidth" 1600) }}
      {{ with $.closing_phrase }}
      {{ $captionClass := "project-break-caption" }}
      {{ with $.closing_phrase_class }}{{ $captionClass = printf "%s %s" $captionClass . }}{{ end }}
      <figcaption class="{{ $captionClass }}">{{ . }}</figcaption>
      {{ end }}
    </figure>
    {{ end }}
  {{ end }}
</section>
